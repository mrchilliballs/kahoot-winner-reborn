let socket=null;socket=null,"/"===location.pathname&&localStorage.autoNavigatePage&&"en"!==localStorage.autoNavigatePage&&(window.stop(),location.pathname=localStorage.autoNavigatePage);class LiveBaseMessage{constructor(e,t,n){this.channel=t,this.clientId=e.clientId,n&&(this.data=n),this.ext={}}}class LiveTwoStepAnswer extends LiveBaseMessage{constructor(e,t){super(e,"/service/controller",{id:50,type:"message",gameid:e.gameid,host:"kahoot.it",content:JSON.stringify({sequence:t.join("")})})}}function sendQuizQuestionAnswers(){send(`QUIZ_QUESTION_ANSWERS;${JSON.stringify(game.client.quiz.quizQuestionAnswers)}`)}const BruteForces=[[0,1,2,3],[0,1,3,2],[0,2,1,3],[0,2,3,1],[0,3,2,1],[0,3,1,2],[1,0,2,3],[1,0,3,2],[1,2,0,3],[1,2,3,0],[1,3,0,2],[1,3,2,0],[2,0,1,3],[2,0,3,1],[2,1,0,3],[2,1,3,0],[2,3,0,1],[2,3,1,0],[3,0,1,2],[3,0,2,1],[3,1,0,2],[3,1,2,0],[3,2,0,1],[3,2,1,0]],MessageHandler={PING:()=>{console.log("Recieved ping from server")},MAINTAINANCE:e=>new ErrorHandler("Maintainance Alert: "+e),ERROR:e=>new ErrorHandler("Search Socket Error: "+e),RESULTS:e=>{if(game.opts.QuizLock)return;const t=JSON.parse(e);return game.guesses=t,game.notifiedRandom||!game.guesses.length||game.guesses[0].uuid!==game.oldQuizUUID||!game.gotWrong||"0"===game.pin[0]||game.opts.manual||game.failedPurposely||["survey","multiple_select_poll","jumble","brainstorming","word_cloud","content","open_ended"].includes(game.lastQuestionType)?void 0:(game.notifiedRandom=!0,new ErrorHandler("You got a question wrong, but it appears to be the correct quiz. The questions may be randomized. Click this to enable manual control.",{onclick:(e,t)=>{document.querySelector("#manual").checked=!0,game.saveOptions(),t.outerHTML="",new ErrorHandler("Manual Control: ON",{isNotice:!0})},time:6e4}))},SERVER_TRANSFER:e=>{socket.onclose=null,grecaptcha.ready((()=>{grecaptcha.execute("6LcyeLEZAAAAAGlTegNXayibatWwSysprt2Fb22n",{action:"search_session"}).then((t=>{game.socket=new WebSocket(`${"http:"==location.protocol?"ws://":"wss://"}${e}/search?token=${t}`),socket=game.socket,socket.onmessage=e=>{const t=(e=e.data).match(/^[A-Z_]+?(?=;)/)[0],n=e.substr(t.length+1);MessageHandler[t]&&MessageHandler[t](n)},socket.onerror=e=>{new ErrorHandler("Search WebSocket Error: "+e)},socket.onclose=()=>{new ErrorHandler("Search Socket Closed.")},game.loadOptions()})).catch((e=>{new ErrorHandler(e)}))}))}},Listeners={QuizStart:e=>{try{game.music.pause()}catch(e){}return sendQuizQuestionAnswers(),send(`QUIZ_NAME;${e.quizTitle}`),new QuizStartPage},QuestionReady:e=>{if(game.questionReady=!0,game.teamAnswered=!1,1===game.fails.length){for(let e=0;e<game.total-1&&0!=+game.opts.fail;e++)game.fails.push(Math.random()>+game.opts.fail);game.fails=shuffle(game.fails)}return sendQuizQuestionAnswers(),new GetReadyPage(e)},QuestionStart:async e=>{!1!==game.questionReady&&(game.questionAnswered=!1,game.receivedTime=Date.now(),sendQuizQuestionAnswers(),new QuestionAnswererPage(e),game.opts.manual||game.teamAnswered||2==+game.opts.searchLoosely||game.answerQuestion(null))},QuestionEnd:e=>{game.questionReady=!1;try{game.music.pause()}catch(e){}try{e.index=game.index}catch(t){return new TimeUpPage(e)}return game.got_answers.push(e),sendQuizQuestionAnswers(),send(`SET_ANSWERS;${JSON.stringify(game.got_answers)}`),new QuestionEndPage(e)},QuizEnd:e=>{game.quizEnded=!0,game.end.info=e,send(`QUIZ_ID;${e.quizId}`),dataLayer.push(Object.assign({event:"quiz_finish"},e))},Podium:e=>("Music"===game.theme?game.playSound("/resource/music/podium.m4a"):"Minecraft"===game.theme&&game.playSound("/resource/music/Pigstep.m4a"),new QuizEndPage(e)),Disconnect:e=>(game.quizEnded=!0,resetGame(),"Error connecting to Challenge"===e&&new ErrorHandler("Try using the Random Name button. This error can happen if your name is not valid."),setTimeout((function(){new ErrorHandler("Quiz ended or kicked. ("+e+")")}),300)),TwoFactorReset:async()=>{if(!game.opts.brute)return game.two=[],new TwoStepPage;{const e=[];for(let t=0;t<BruteForces.length;t++){const n=new LiveTwoStepAnswer(game.client,BruteForces[t]);n.id=""+ ++game.client.messageId,e.push(n)}for(let t=0;t<e.length;t+=2)await sleep(.4),game.client.socket.send(JSON.stringify(e.slice(t,t+2)))}},TwoFactorWrong:()=>new TwoStepPage(!0),TwoFactorCorrect:()=>new LobbyPage,GameReset:()=>{new LobbyPage,delete game.question,delete game.guesses,delete game.answers,delete game.rawData,delete game.ans,delete game.got_answers,game.quizEnded=!1},NameAccept:e=>{const t=e;game.name=t.playerName;try{document.getElementById("L2").innerHTML=`<p>${t.playerName}</p>`}catch(e){}},TimeOver:()=>{new TimeUpPage},Feedback:()=>{new FeedbackPage},TeamTalk:e=>{game.teamTalkTime=Date.now(),game.questionAnswered=!1,new TeamTalkPage(e),!game.opts.teamtalk||game.opts.manual||game.teamAnswered||2==+game.opts.searchLoosely||game.answerQuestion(null)}};function shuffle(e){let t,n,a=(e=Array.from(e)).length;for(;0!==a;)n=Math.floor(Math.random()*a),a-=1,t=e[a],e[a]=e[n],e[n]=t;return e}class Game{constructor(){this.client=new KahootClient({proxy:e=>(e.host=location.hostname,e.port=location.port,e.path="/kahoot"+e.path,e.protocol=location.protocol,e)}),this.socket=null,this.gotWrong=!1,this.lastQuestionType=null,this.failedPurposely=null,this.notifiedRandom=!1,this.oldQuizUUID="",this.ready=!1,this.teamTalkTime=0,this.guesses=[],this.fails=[!0],this.teamAnswered=!1,this.answers=[],this.got_answers=[],this.quizEnded=!0,this.end={},this.two=[],this.errorTimeout=null,this.jumbleAnswer=[],this.multiAnswer={0:!1,1:!1,2:!1,3:!1},this.theme="Kahoot",this.opts={},this.correctIndex=null,this.questionStarted=!1,this.questionAnswered=!1,this.panicSettings=null}get name(){return this.client.name}get streak(){return this.client.data.streak}get cid(){return this.client.cid}get pin(){return this.gameid||this.client.gameid}get score(){return this.client.data.totalScore}get total(){return this.client.quiz.quizQuestionAnswers.length}get index(){return this.client.quiz.currentQuestion.index||this.client.quiz.currentQuestion.gameBlockIndex||this.client.quiz.currentQuestion.questionIndex||0}sendPin(e){return new Promise((t=>{activateLoading(!0,!0);const n=["weekly","weekly-previous","https://kahoot.com/kahoot-of-the-week-previous","https://kahoot.com/kahoot-of-the-week","https://kahoot.com/kahoot-of-the-week-previous/","https://kahoot.com/kahoot-of-the-week-previous","kahoot-of-the-week","kahoot-of-the-week-previous"];if(isNaN(e))if(n.includes(e)){let n;n=-1!==e.indexOf("previous")?"/kahoot/weekly-previous":"/kahoot/weekly";const a=new XMLHttpRequest;a.open("GET",n),a.send(),a.onload=()=>{activateLoading(!1,!1),this.gameid=a.response.match(/challenge\/\d+/gm)[0].replace("challenge/",""),new LoginPage(!0),t()},a.onerror=()=>{activateLoading(!1,!1),new ErrorHandler("Failed to fetch weekly pin"),new LoginPage,t()}}else try{const n=new URL(e).pathname.split(/challenge\//g)[1],a=n.match(/\d+/g)[0];if(n.length===a.length&&n.length>0)this.gameid=n,activateLoading(!1,!1),new LoginPage(!0),t();else{const e=new XMLHttpRequest;e.open("GET",`/kahoot/rest/challenges/${n}`),e.send(),e.onerror=()=>{activateLoading(!1,!1),new ErrorHandler("Failed to fetch challenge pin"),new LoginPage,t()},e.onload=()=>{const n=JSON.parse(e.response);n.error?(activateLoading(!1,!1),new ErrorHandler("Invalid PIN"),new LoginPage,t()):(this.gameid=n.pin,activateLoading(!1,!1),new LoginPage(!0),t())}}}catch(e){activateLoading(!1,!1),new LoginPage,new ErrorHandler("Invalid PIN"),t()}else{if(void 0===e||""===e)return activateLoading(!1,!1),new ErrorHandler("Please enter a PIN"),new LoginPage,void t();activateLoading(!1,!1),this.gameid=e,new LoginPage(!0),t()}}))}join(e){activateLoading(!0,!0),this.client.join(this.pin,e,this.opts.teamMembers?this.opts.teamMembers.split(","):null).then((()=>{"Music"===this.theme?this.playSound("/resource/music/lobby.m4a"):"Minecraft"===this.theme&&this.playSound("/resource/music/Minecraft.mp3"),this.quizEnded=!1,dataLayer.push({event:"join_game"}),activateLoading(!1,!1),new LobbyPage,"0"!==this.pin[0]?grecaptcha.ready((()=>{grecaptcha.execute("6LcyeLEZAAAAAGlTegNXayibatWwSysprt2Fb22n",{action:"search_session"}).then((e=>{void 0!==game.client.cid&&(this.socket=new WebSocket(`${"http:"==location.protocol?"ws://":"wss://"}${location.host}/search?token=${e}`),socket=this.socket,socket.onmessage=e=>{const t=(e=e.data).match(/^[A-Z_]+?(?=;)/)[0],n=e.substr(t.length+1);MessageHandler[t]&&MessageHandler[t](n)},socket.onerror=e=>{new ErrorHandler("Search WebSocket Error: "+e)},socket.onclose=()=>{new ErrorHandler("Search Socket Closed.")},this.loadOptions())})).catch((e=>{new ErrorHandler(e)}))})):this.guesses=[this.client.challengeData.kahoot]})).catch((e=>{console.log(e),new ErrorHandler("Failed to join: "+e.description||e.status||e),resetGame()}));for(const e in Listeners)this.client.on(e,Listeners[e])}getRandom(){dataLayer.push({event:"get_random_name"});const e=["Adorable","Agent","Agile","Amazing","Amazon","Amiable","Amusing","Aquatic","Arctic","Awesome","Balanced","Blue","Bold","Brave","Bright","Bronze","Captain","Caring","Champion","Charming","Cheerful","Classy","Clever","Creative","Cute","Dandy","Daring","Dazzled","Decisive","Diligent","Diplomat","Doctor","Dynamic","Eager","Elated","Epic","Excited","Expert","Fabulous","Fast","Fearless","Flying","Focused","Friendly","Funny","Fuzzy","Genius","Gentle","Giving","Glad","Glowing","Golden","Great","Green","Groovy","Happy","Helpful","Hero","Honest","Inspired","Jolly","Joyful","Kind","Knowing","Legend","Lively","Lovely","Lucky","Magic","Majestic","Melodic","Mighty","Mountain","Mystery","Nimble","Noble","Polite","Power","Prairie","Proud","Purple","Quick","Radiant","Rapid","Rational","Rockstar","Rocky","Royal","Shining","Silly","Silver","Smart","Smiling","Smooth","Snowy","Soaring","Social","Space","Speedy","Stellar","Sturdy","Super","Swift","Tropical","Winged","Wise","Witty","Wonder","Yellow","Zany"],t=["Alpaca","Ant","Badger","Bat","Bear","Bee","Bison","Boa","Bobcat","Buffalo","Bunny","Camel","Cat","Cheetah","Chicken","Condor","Crab","Crane","Deer","Dingo","Dog","Dolphin","Dove","Dragon","Duck","Eagle","Echidna","Egret","Elephant","Elk","Emu","Falcon","Ferret","Finch","Fox","Frog","Gator","Gazelle","Gecko","Giraffe","Glider","Gnu","Goat","Goose","Gorilla","Griffin","Hamster","Hare","Hawk","Hen","Horse","Ibex","Iguana","Impala","Jaguar","Kitten","Koala","Lark","Lemming","Lemur","Leopard","Lion","Lizard","Llama","Lobster","Macaw","Meerkat","Monkey","Mouse","Newt","Octopus","Oryx","Ostrich","Otter","Owl","Panda","Panther","Pelican","Penguin","Pigeon","Piranha","Pony","Possum","Puffin","Quail","Rabbit","Raccoon","Raven","Rhino","Rooster","Sable","Seal","SeaLion","Shark","Sloth","Snail","Sphinx","Squid","Stork","Swan","Tiger","Turtle","Unicorn","Urchin","Wallaby","Wildcat","Wolf","Wombat","Yak","Yeti","Zebra"],n=e[Math.floor(Math.random()*e.length)]+t[Math.floor(Math.random()*t.length)];document.getElementById("loginInput").value=n}saveOptions(){const e=SettingDiv.querySelectorAll("input,select"),t={},n=Object.assign({},this.opts);for(let n=0;n<e.length;++n)t[e[n].id]="checkbox"==e[n].type?e[n].checked:e[n].value;localStorage.options=JSON.stringify({manual:t.manual,timeout:t.timeout,brute:t.brute,fail:t.fail,teamtalk:t.teamtalk,teamMembers:t.teamMembers,theme:t.theme,previewQuestion:t.previewQuestion,searchLoosely:t.searchLoosely,ChallengeDisableAutoplay:t.ChallengeDisableAutoplay,ChallengeDisableTimer:t.ChallengeDisableTimer,div_game_options:t.div_game_options,div_search_options:t.div_search_options,div_challenge_options:t.div_search_options});const a=this.opts;if(this.theme=t.theme,this.opts=t,+t.timeout<0?(t.timeout=Math.abs(t.timeout),t.variableTimeout=!0):t.variableTimeout=!1,t.ChallengeDisableAutoplay?this.client.defaults.options.ChallengeAutoContinue=!1:this.client.defaults.options.ChallengeAutoContinue=!0,t.challengePoints?this.client.defaults.options.ChallengeScore=+this.opts.challengePoints:this.client.defaults.options.ChallengeScore=0,t.challengeCorrect?this.client.defaults.options.ChallengeAlwaysCorrect=!0:this.client.defaults.options.ChallengeAlwaysCorrect=!1,t.ChallengeEnableStreaks?this.client.defaults.options.ChallengeUseStreakBonus=!0:this.client.defaults.options.ChallengeUseStreakBonus=!1,t.ChallengeDisableTimer?this.client.defaults.options.ChallengeWaitForInput=!0:this.client.defaults.options.ChallengeWaitForInput=!1,(2==+t.fail&&1==+this.fails.length||t.fail!==n.fail)&&(2==+t.fail?this.fails=[!1]:this.fails=[!0]),isNaN(t.timeout))try{const e=t.timeout.split("-");2===e.length?(t.timeout=+e[0],t.timeoutEnd=+e[1]):3===e.length?(t.timeout=-e[1],t.timeoutEnd=+e[2]):(t.timeout=-e[1],t.timeoutEnd=+e[3]),t.timeout=t.timeout||0}catch(e){t.timeout=0,t.timeoutEnd=0}if(n.timeout!==this.opts.timeout&&!this.opts.manual&&this.questionStarted&&!this.questionAnswered){clearTimeout(this.waiter);const e=1e3*+this.opts.timeout+ +this.opts.variableTimeout*Math.random()*1e3,t=Math.random()*(+this.opts.timeoutEnd-e/1e3||0)*1e3,n=Date.now()-this.receivedTime;this.waiter=setTimeout((()=>{this.answerQuestion(null)}),e+t-n)}send(`SET_OPTS;${JSON.stringify(t)}`),this.questionStarted&&!this.questionAnswered&&a.manual&&!this.opts.manual&&this.answerQuestion(null)}async answerQuestion(e){if(this.questionAnswered)return;if(null===e&&(e=this.getCorrectAnswer()),this.failedPurposely=!1,+this.opts.fail&&this.fails[this.index]&&!this.opts.manual)switch(this.failedPurposely=!0,this.client.quiz.currentQuestion.gameBlockType){case"open_ended":case"word_cloud":e="fgwadsfihwksdxfs";break;case"jumble":e=[0,1,2,3];break;case"multiple_select_poll":case"multiple_select_quiz":e=[-1];break;default:e=-1}if(this.teamAnswered=!0,this.questionAnswered=!0,this.opts.teamtalk){const e=Date.now()-this.teamTalkTime;e<250&&await sleep((250-e)/1e3)}const t=+game.opts.timeout+ +game.opts.variableTimeout*Math.random(),n=Math.random()*(+game.opts.timeoutEnd-t||0);this.opts.manual||await sleep(t+n),this.client.answer(e).finally((()=>{const e=["Were you tooooooo fast?","Pure genius or guesswork?","Secret classroom superpowers?","Genius machine?","Classroom perfection?","Pure genius?","Lightning smart?"],t=e[Math.floor(Math.random()*e.length)];return new QuestionSnarkPage(t)}))}getCorrectAnswer(e,t){const n=this.question,a=+this.opts.searchLoosely?game.correctIndex:n.questionIndex;let o;switch(n.gameBlockType){case"open_ended":case"word_cloud":o="honestly, i don't know";break;case"jumble":o=shuffle([0,1,2,3]);break;case"multiple_select_quiz":o=shuffle([0,1,2,3]).slice((n.quizQuestionAnswers||this.client.quiz.quizQuestionAnswers)[n.questionIndex]-Math.floor(Math.random()*(this.client.quiz.quizQuestionAnswers[n.questionIndex]+1)));break;default:o=Math.floor(Math.random()*(n.quizQuestionAnswers||this.client.quiz.quizQuestionAnswers)[a])}try{if(t)return o;e&&console.log(`Using quiz id ${this.guesses[0].uuid}`);const s=this.guesses[0].questions[a].choices;if(!s)return o;if(this.guesses[0].questions[a].type!==n.gameBlockType)return o;for(let e=0;e<s.length;++e)if(s[e].correct){if(o=e,"open_ended"===this.guesses[0].questions[a].type)return s[e].answer;break}if("jumble"===this.guesses[0].questions[a].type)return"0"===this.pin[0]?[0,1,2,3]:shuffle([0,1,2,3]);if("multiple_select_quiz"===this.guesses[0].questions[a].type){const e=this.guesses[0].questions[a].choices||[],t=[];for(let n=0;n<e.length;n++)e[n].correct&&t.push(n);o=t}return o}catch(e){return o}}sendFeedback(e){const{fun:t,learn:n,recommend:a,overall:o}=e;this.client.sendFeedback(t,n,a,o)}loadOptions(){let e;try{e=JSON.parse(localStorage.options),this.opts=e,this.theme=e.theme}catch(e){return}if(e){for(const t in e){const n=document.getElementById(t);"checkbox"==n.type?n.checked=e[t]:n.value=e[t]}if(socket&&1===socket.readyState)return this.saveOptions(),dataLayer.push(Object.assign({event:"load_options"},e)),new ErrorHandler("Restored Options!",{isNotice:!0});null!==socket&&setTimeout((()=>{this.loadOptions()}),3e3)}}answer(e){activateLoading(!0,!0),this.answerQuestion(e),dataLayer.push({event:"answer",value:e,type:this.question.type})}answer2(e,t){if(t.className="faded",-1==this.two.indexOf(e))return this.two.push(e),4==this.two.length?(this.client.answerTwoFactorAuth(this.two),void activateLoading(!0,!0,"")):void 0}answerJ(e){const t=[];for(let n=0;n<e.length;n++)t.push(Number(e[n].getAttribute("index")));this.answer(t)}answerM(e,t){this.multiAnswer[e]=!this.multiAnswer[e],-1!=t.className.indexOf("correct")?t.className=this.multiAnswer[e]?"fadedm correct":"correct":t.className=this.multiAnswer[e]?"fadedm":""}updateName(){clearTimeout(this.saveTimeout);const e=/[a-f0-9]{8}(-[a-f0-9]{4}){3}-[a-f0-9]{12}/i;e.test(document.getElementById("searchTerm").value)&&(document.getElementById("uuid").value=document.getElementById("searchTerm").value.match(e)[0]),this.saveTimeout=setTimeout(this.saveOptions,500)}playSound(e,t){return this.music||(this.music=new Audio,this.music.addEventListener("timeupdate",(()=>{this.music.currentTime>this.music.duration-.44&&!this.music.once&&(this.music.currentTime=0,this.music.play())})),this.music.addEventListener("canplaythrough",(()=>{this.music.res&&this.music.res()}))),new Promise((n=>{this.music.once=t,this.music.res=n,this.music.pause(),this.music.src=e,this.music.play()}))}}function send(e){null!==socket&&socket.send(e)}function setCookie(e){localStorage.autoNavigatePage=e,location.href="en"!==e?"/"+e:"/"}let game=null;game=new Game;const eggstyle=document.createElement("style");let egg="";eggstyle.innerHTML="p,.sm span,img,h1,h2,.About h3,.tut_cont h3,h4{\n  animation: infinite windance 1s;\n}";let shouldStop=!1;function detectPlatform(){let e="Linux";return-1!=navigator.appVersion.indexOf("Win")&&(e="Windows"),-1!=navigator.appVersion.indexOf("Mac")&&(e="MacOS"),-1!=navigator.appVersion.indexOf("X11")&&(e="UNIX"),-1!=navigator.appVersion.indexOf("Linux")&&(e="Linux"),e}window.addEventListener("keydown",(async e=>{"Escape"==e.key&&(0==closePage?SettingSwitch.click():1==closePage?AboutSwitch.click():ChangelogSwitch.click()),egg+=e.key;try{if(0!=="winner".search(egg)&&0!=="return by death".search(egg)&&0!=="behold an unthinkable present".search(egg)&&0!=="explosion".search(egg)&&0!=="01189998819991197253".search(egg)){egg="",shouldStop&&(game.music.pause(),shouldStop=!1);try{document.body.removeChild(eggstyle)}catch(e){}}else if("winner"===egg)document.body.append(eggstyle);else if("01189998819991197253"===egg){await game.playSound("/resource/music/01189998819991197253.m4a",!0);const e=Element("div",{style:"position: fixed;\n          bottom: 8rem;\n          left: 0;\n          color: white;\n          font-size: 1.25rem;\n          width: 100%;\n          z-index: 500;"}),t=Element("h2",{style:"width: 21.5rem;margin:auto;"}),n="01189998819991197253",a=[.3,.5,.34,.33,.7,.23,.27,1.28,.45,.45,.5,.45,.9,.25,.34,.45,.73,.52,.5,1.77];e.append(t),document.body.append(e);for(let e=0;e<n.length;e++)await sleep(a[e]),t.innerHTML+=n[e];await sleep(1.5),t.outerHTML=""}else if("return by death"===egg)"ReZero"===game.theme&&(await game.playSound("/resource/music/return_by_death.mp3"),shouldStop=!0,document.body.style="box-shadow:inset 0 0 10rem 5rem darkviolet;",setTimeout((()=>{game.music.pause(),document.body.style=""}),2e4*Math.random()+1e4));else if("behold an unthinkable present"===egg)"ReZero"===game.theme&&(game.playSound("/resource/music/behold_unthinkable_present.m4a"),shouldStop=!0);else if("explosion"===egg&&"KonoSuba"===game.theme&&0===game.pin){await game.playSound("/resource/music/megumin_explosion.mp3",!0),document.body.style="box-shadow:inset 0 0 0.7rem 0.7rem #451b0e,inset 0 0 1.4rem 1.4rem #973716,inset 0 0 1.8rem 1.8rem #cd4606,inset 0 0 2.1rem 2.1rem #ec760c,inset 0 0 2.4rem 2.4rem #ffae34,inset 0 0 2.7rem 2.7rem #fefcc9";const e=document.createElement("img");e.src="/resource/img/game/theme/konosuba/red.svg",e.style="position:fixed;top:calc(50% - 5rem);left:100%;width:10rem;transition:left 4s;",document.body.append(e),setTimeout((()=>{e.style.left="calc(75% - 5rem)"})),setTimeout((()=>{e.style.left="150%"}),16e3),setTimeout((()=>{document.body.style="";const t=document.createElement("div");document.body.append(t),t.style="position:fixed;top:0;left:0;width:100%;height:100%;z-index:5000;transition:background 2s",t.style.background="darkorange",setTimeout((()=>{t.style.background="beige",setTimeout((()=>{e.outerHTML="",t.style.background="black",setTimeout((()=>{t.outerHTML=""}),3e3)}),3e3)}),2e3)}),21e3)}}catch(e){egg="",shouldStop&&(game.music.pause(),shouldStop=!1)}})),window.addEventListener("unload",(()=>{game.client.leave()})),localStorage.KW_Version="v6.0.1";const checkVersion=new XMLHttpRequest;checkVersion.open("GET","/up"),checkVersion.send(),checkVersion.onload=function(){const e=checkVersion.response.split(": ")[1],t=localStorage.KW_Version||e;"false"!=localStorage.KW_Update&&200===checkVersion.status&&(e!=t&&new ErrorHandler("A new update is available.",{permanent:!0,onclick:(t,n)=>{n.outerHTML="";const a=document.createElement("div");a.id="UpdateDiv",a.innerHTML='<h2>A new update is available.</h2>\n        <h4>Would you like to update now?</h4>\n        <p>If this message keeps appearing, try hard refreshing your page or clearing your cache.</p>\n        <button id="UpdateYes">Yes</button><button id="UpdateNo">Not Yet</button><br>\n        <button onclick="localStorage.KW_Update = false;this.parentElement.outerHTML = \'\';">Disable update notification</button>',document.body.append(a),document.getElementById("UpdateYes").onclick=function(){"serviceWorker"in navigator?(document.getElementById("UpdateYes").innerHTML="Please wait...",navigator.serviceWorker.getRegistrations().then((async function(t){for(const e of t)await e.unregister();setTimeout((function(){localStorage.KW_Version=e,location.reload()}),3e3)})).catch((function(){document.getElementById("UpdateDiv").outerHTML="",new ErrorHandler("There was an error forcing an update. Please clear or reload the page cache manually.")}))):(document.getElementById("UpdateDiv").outerHTML="",new ErrorHandler("There was an error forcing an update. Please clear or reload the page cache manually."))},document.getElementById("UpdateNo").onclick=function(){document.getElementById("UpdateDiv").outerHTML=""}}}),localStorage.KW_Version||(localStorage.KW_Version=e))};const AprilFoolsThemes=["KonoSuba","ReZero","FRANXX"],AprilFoolTheme=AprilFoolsThemes[Math.floor(Math.random()*AprilFoolsThemes.length)],KahootThemes={get Kahoot(){const e=new Date;return 3===e.getMonth()&&e.getDate()<=7?KahootThemes[AprilFoolTheme]:{red:"kahoot/red.svg",blue:"kahoot/blue.svg",green:"kahoot/green.svg",yellow:"kahoot/yellow.svg",get logo(){return e.getMonth()>=9&&e.getMonth()<11?"kahoot/logo-halloween.svg":11===e.getMonth()?"kahoot/logo-xmas.svg":"kahoot/logo.svg"}}},KonoSuba:{red:"konosuba/red.svg",blue:"konosuba/blue.svg",green:"konosuba/green.svg",yellow:"konosuba/yellow.svg",logo:"konosuba/logo.svg"},get Rainbow(){return KahootThemes.Kahoot},get Music(){return KahootThemes.Kahoot},FRANXX:{red:"franxx/red.svg",blue:"franxx/blue.svg",green:"franxx/green.svg",yellow:"franxx/yellow.svg",get logo(){return KahootThemes.Kahoot.logo}},ReZero:{red:"rezero/red.svg",blue:"rezero/blue.svg",green:"rezero/green.svg",yellow:"rezero/yellow.svg",logo:"rezero/logo.svg"},Minecraft:{red:"minecraft/red.svg",blue:"minecraft/blue.svg",green:"minecraft/green.svg",yellow:"minecraft/yellow.svg",logo:"minecraft/logo.png"},Duck:{logo:"duck/logo.svg",red:"duck/red.svg",green:"duck/green.svg",blue:"duck/blue.svg",yellow:"duck/yellow.svg"}};function Element(e,t){const n=document.createElement(e);for(const e in t||{})n[e]=t[e];return n}function RemoveHandshakeFail(){document.getElementById("handshake-fail-div")&&(document.getElementById("handshake-fail-div").outerHTML="")}function NotFoundDiv(){const e=Element("div",{className:"ChallengeQuestion noQuiz"}),t=Element("span");return t.innerHTML=`<input id="nameInput" placeholder="Enter Quiz Name" value="${document.getElementById("searchTerm").value.replace(/&/g,"&amp;").replace(/"/g,"&quot;")||""}" oninput="document.getElementById('searchTerm').value = this.value;game.updateName();"></input>`,e.append(Element("br"),Element("br"),t),e}class LoginPage{constructor(e){document.body.className="rainbow",Themer(),QuizResult.className="disabled button",QuizResult.removeAttribute("url"),ChallengeContinueButton.style.display="none",RemoveHandshakeFail();const t=clearUI();t.className="Login",t.setAttribute("ui-event","Login");const n=Element("img",{alt:"Kahoot logo",src:`/resource/img/game/theme/${KahootThemes[game.theme].logo}`}),a=Element("p",{id:"logotext",innerHTML:"WINNER",onclick:()=>{a.style.display="none"}}),s=Element("input",{type:e?"text":"tel",id:"loginInput",placeholder:e?"Nickname":"Game PIN",onkeydown:e?e=>{if("Enter"===e.code)return game.join(s.value)}:e=>{if("Enter"===e.code)return game.sendPin(s.value)}}),o=Element("button",{innerHTML:e?"OK, Go!":"Enter",id:"loginButton",onclick:e?()=>game.join(s.value):()=>game.sendPin(s.value)});if(e){try{document.getElementById("lang").outerHTML=""}catch(e){}const e=Element("button",{innerHTML:"Get Random Name",onclick:()=>{game.getRandom()}});e.style.marginBottom="0.5rem",t.append(n,a,s,e,o),document.getElementsByClassName("grecaptcha-badge")[0].style.visibility="hidden"}else{document.getElementById("div_challenge_options").parentElement.className="";const e=Element("label",{htmlFor:"about",innerHTML:"About",id:"abtlnk"}),l=Element("div",{id:"chnge"}),r=Element("label",{htmlFor:"changelog",innerHTML:"Changelog"}),i=Element("span",{innerHTML:"Kahoot! and the K! logo are trademarks of Kahoot! AS."}),c=Element("span",{innerHTML:'<a href="/privacy/">Privacy</a> | <a href="/terms/">Terms</a>'}),m=Element("div",{id:"lang"});m.innerHTML='<label for="langToggle"><img src="/resource/img/site/language.svg"/></label>\n      <input class="ch" id="langToggle" type="checkbox"/>\n      <div class="lang">\n        <button onclick="setCookie(\'en\')">English</button>\n        <button onclick="setCookie(\'es\')">Español</button>\n        <button onclick="setCookie(\'zh\')">中文</button>\n      </div>',document.getElementById("lang")||document.body.append(m),l.append(r,i,c),t.append(n,a,s,o,e,l)}const l=Element("div",{className:"sm sidebar correct"});l.innerHTML='<div class="mobihide2 mobihide">\n    <a href="/creator" target="_blank"><img src="/resource/img/site/icon-kahoot.svg" alt="create"><span>Creator</span></a>\n    <a href="/api" target="_blank"><img src="/resource/img/site/icon-api.svg" alt="api"><span>Kahoot API</span></a>\n    <a href="/blog" target="_blank"><img src="/resource/img/site/icon-blog.svg" alt="Icon made from http://www.onlinewebfonts.com/icon is licensed by CC BY 3.0"><span>Blog</span></a>\n    <a href="/blog/download" target="_blank" class="mobihide2 mobihide"><img src="/resource/img/site/icon192.png" alt="download mark"><span>App Download</span></a>\n    </div>\n    <a href="https://discord.gg/58SHzC2" target="_blank"><img src="/resource/img/site/logo-discord.svg" alt="discord"><span>Discord</span></a>\n    <a href="https://twitter.com/theusafyt" target="_blank"><img src="/resource/img/site/logo-twitter.svg" alt="twitter"><span>Twitter</span></a>\n    <a href="https://www.facebook.com/theusafmc" target="_blank"><img src="/resource/img/site/logo-fbook.svg" alt="facebook"><span>Facebook</span></a>',e||t.append(l),UIDiv.append(t)}}class TwoStepPage{constructor(e){new ErrorHandler(e?"2 Step Auth Failed.":"2 Step Auth Required");const t=new LobbyPage;t.mid.innerHTML="",t.main.setAttribute("ui-event","TwoFactorAuth"),document.body.className="Rainbow"==game.theme?"rainbow":"purple";const n=Element("p",{innerHTML:"PIN: "+game.pin});t.top.append(n);const a=Element("div",{className:"Answers"}),s=Element("img",{src:`/resource/img/game/theme/${KahootThemes[game.theme].red}`,alt:"Red",onclick:()=>{game.answer2(0,s)}}),o=Element("img",{src:`/resource/img/game/theme/${KahootThemes[game.theme].blue}`,alt:"Blue",onclick:()=>{game.answer2(1,o)}}),l=Element("img",{src:`/resource/img/game/theme/${KahootThemes[game.theme].green}`,alt:"Green",onclick:()=>{game.answer2(3,l)}}),r=Element("img",{src:`/resource/img/game/theme/${KahootThemes[game.theme].yellow}`,alt:"Yellow",onclick:()=>{game.answer2(2,r)}});a.append(s,o,r,l),t.main.append(a),e&&activateLoading(!1,!0)}}class ErrorHandler{constructor(e,t){const n=Element("div",{className:(t=t||{}).isNotice?"NotError":"",onclick:t.onclick?e=>{t.onclick(e,n)}:null}),a=Element("span",{innerHTML:e}),s=Element("span",{innerHTML:"X",onclick:e=>{n.outerHTML="",e.preventDefault(),e.stopPropagation()},className:"ErrorCloser"});n.append(a,s),UIError.insertBefore(n,UIError.querySelector("div"));let o=7e3;n.onclick&&(o=3e4,n.className+=" Clickable"),t.time&&(o=t.time),t.permanent||setTimeout((()=>{n.style.opacity=0,setTimeout((()=>{try{n.outerHTML=""}catch(e){}}),1e3)}),o)}}class LobbyPage{constructor(){try{document.getElementById("lang").outerHTML=""}catch(e){}RemoveHandshakeFail(),window.onbeforeunload=function(e){e.returnValue="Are you sure you want to leave the page?"},document.querySelector(".ad-container").style.display="none",document.querySelector(".ad-container-2").style.display="none","0"===game.pin[0]&&game.opts.ChallengeDisableAutoplay&&(ChallengeContinueButton.style.display="");const e=clearUI();e.className="lobby",e.setAttribute("ui-event","Lobby"),document.body.className="Rainbow"==game.theme?"rainbow":"green";const t=Element("div",{id:"L1",className:"extra"}),n=Element("div",{id:"L2",className:"extra"});"Rainbow"==game.theme&&(t.className="extra rainbow");const a=Element("p",{innerText:game.name}),s=Element("h1",{className:"shadow",innerHTML:"You're in!"}),o=Element("h2",{innerHTML:"See your nickname on screen?",className:"shadow"}),l=Element("div",{id:"UIMid"}),r=Element("div");return s.setAttribute("text","You're in!"),o.setAttribute("text","See your nickname on screen?"),n.append(a),r.append(s,o),l.append(r),e.append(t,n,l),0===game.guesses.length&&e.append(NotFoundDiv()),UIDiv.append(e),{main:e,top:t,mid:l,bottom:n}}}class GetReadyPage{constructor(e,t){if(game.recievedTime=Date.now(),game.questionStarted=!1,game.isAnswerPage=!1,game.jumbleAnswer=[],game.question=e,game.guesses.length){const e=+game.opts.searchLoosely&&game.correctIndex||game.index;game.answers=game.guesses[0].questions[e].choices||[{correct:!1,answer:""},{correct:!1,answer:""},{correct:!1,answer:""},{correct:!1,answer:""}]}else game.answers=[{correct:!1,answer:""},{correct:!1,answer:""},{correct:!1,answer:""},{correct:!1,answer:""}];const n=new LobbyPage;try{document.querySelector(".noQuiz").outerHTML=""}catch(e){}ChallengeContinueButton.style.display="none",document.body.className="blue",n.main.setAttribute("ui-event","GetReady"),n.mid.innerHTML="";const a=Element("h1",{innerHTML:`Question ${(e.questionIndex||0)+1}`,className:"shadow"});a.setAttribute("text",a.innerText),game.ans=e.quizQuestionAnswers;const s={time:e.timeAvailable||2e4};if(game.guesses.length>=1?(QuizResult.className="button",QuizResult.setAttribute("url",`https://create.kahoot.it/details/${game.guesses[0].uuid}`)):(QuizResult.className="disabled button",QuizResult.removeAttribute("url")),""!==document.getElementById("timeout_custom_1").value){const e=calculateTimeout(Number(document.getElementById("timeout_custom_1").value),s.time,0);document.getElementById("timeout").value=e/1e3,game.saveOptions()}else if(""!==document.getElementById("timeout_custom_2").value){const e=Number(document.getElementById("timeout_custom_2").value)-game.score,t=game.total-game.index;let n=0;n=e/t<500?s.time+500:calculateTimeout(e/t,s.time,game.streak),document.getElementById("timeout").value=n/1e3,game.saveOptions()}game.guesses&&game.guesses.length&&game.guesses[0].uuid!==game.oldQuizUUID&&(game.oldQuizUUID=game.guesses[0].uuid,dataLayer.push({event:"find_quiz",value:game.oldQuizUUID}));const o=Element("h2",{innerHTML:"Ready...",className:"shadow"});o.setAttribute("text","Ready...");const l=Element("p",{innerHTML:""+game.score,className:"dark"}),r=Element("p",{innerHTML:`${game.index+1} of ${game.total}`}),i=Element("img",{alt:"",src:`/resource/img/game/type/${e.gameBlockType}.svg`}),c=Element("span",{innerHTML:{quiz:"Quiz",open_ended:"Type Answer",survey:"Poll",jumble:"Puzzle",word_cloud:"Word Cloud",content:"Slide",multiple_select_poll:"Poll",multiple_select_quiz:"Quiz",brainstorming:"Brainstorm"}[e.gameBlockType]}),m=Element("div",{id:"quizTypeImage"});if("multiple_select_quiz"===e.gameBlockType?i.src="/resource/img/game/type/quiz.svg":"multiple_select_poll"===e.gameBlockType?i.src="/resource/img/game/type/survey.svg":"quiz"===e.gameBlockType&&"TRUE_FALSE"===game.gameBlockLayout&&(i.src="/resource/img/game/type/true_false.svg",c.innerHTML="True or False"),m.append(i,c),n.top.append(r,m),n.bottom.append(l),"content"==e.gameBlockType){document.body.className="blue2";const e=Element("div"),t=Element("h1",{innerHTML:"Look Up!",className:"shadow"});t.setAttribute("text","Look Up!");const a=Element("h2",{innerHTML:"No need to answer this time!",className:"shadow"});a.setAttribute("text","No need to answer this time!");const s=Element("img",{src:"/resource/img/game/icon/content-slide.svg",id:"ContentImage"});return e.append(t,s,a),n.mid.append(e),n}if(t)return n;const u=Element("h2",{id:"timer",innerHTML:e.timeLeft||"5"}),d=Element("div"),g=Element("div"),p=Element("img",{src:"/resource/img/game/icon/load-large.svg",className:"load_circle",alt:"load_circle"});g.append(p,u),d.append(a,g,o),n.mid.append(d);let h=e.timeLeft||5;const y=setInterval((()=>{try{--h<0?clearInterval(y):(u.innerHTML=h,o.innerHTML=["Go!","Set.","Ready..."][h>=3?2:h],o.setAttribute("text",o.innerText))}catch(e){clearInterval(y)}}),1e3);if(+game.opts.searchLoosely){if(2==+game.opts.searchLoosely){const e=Element("div",{innerHTML:"<span>Ready!</span>",className:"next"});e.addEventListener("click",(()=>{e.innerHTML="<span>Waiting...</span>",e.className="faded next",function e(){if(game.questionStarted)return new QuestionAnswererPage;setTimeout((function(){e()}),500)}()})),n.main.append(e)}if(activateLoading(!1,!1),clearInterval(y),u.outerHTML="",d.outerHTML="",0==game.guesses.length)n.main.append(NotFoundDiv());else{const t=game.guesses[0].questions,a=[];for(let n=0;n<t.length;n++)if(t[n].type==e.gameBlockType&&(t[n].layout==e.gameBlockLayout||!t[n].layout)&&("object"==typeof t[n].choices&&t[n].choices.length||null)==game.ans[game.index]){let e=!0,s=0;const o=game.got_answers.slice(0);for(let a=0;a<o.length;a++){function b(e){const{text:t,isCorrect:n,type:s,choice:l}=o[a];switch(s){case"quiz":return null!=l&&(t===e.answer&&e.correct===n);case"open_ended":return!!n&&(t===e.answer&&e.correct);case"jumble":case"multiple_select_poll":case"multiple_select_quiz":return!!t.split("|").includes(l.answer||"");default:return t===e.answer&&e.correct===n}}if(t[n].choices&&t[n].choices.filter(b).length){e=!1;for(let e=0;e<t.length;e++)t[e].choices.filter(b).length&&s++;break}}if(!e&&1===s)continue;a.push({i:n,q:t[n]})}const s=Element("input",{className:"looseInput",placeholder:"Question"}),o=Element("div",{className:"looseDiv"}),l=Element("div",{className:"looseOptions"}),r=e=>{l.innerHTML="";let t=!1;for(let n=0;n<a.length;n++){const s=a[n].q.question||a[n].q.title,o=/<\/?[ib]>|[^a-z0-9\s]/gim,r=/<\/?[ib]>/gim;const i=s.replace(o," ").replace(/\s+/gm," ").match(new RegExp(e.replace(o," ").replace(/\s+/gm," "),"gmi")),c=s.replace(r,"").match(new RegExp(e.replace(r,"").replace(/\[/gm,"\\[").replace(/\(/gm,"\\(").replace(/\{/gm,"\\{").replace(/\*/gm,"\\*").replace(/\+/gm,"\\+").replace(/\?/gm,"\\?").replace(/\|/gm,"\\|").replace(/\^/gm,"\\^").replace(/\$/gm,"\\$").replace(/\./gm,"\\.").replace(/\\/gm,"\\\\"),"gmi")),m=s.replace(o,"").match(new RegExp(e.replace(o,""),"gmi"));if(i||c||m){t||(game.correctIndex===a[n].i||(game.correctIndex=a[n].i,game.answers=game.guesses[0].questions[a[n].i].choices),t=!0);const e=i||c||m,o=Element("p");let r=s;for(let t=0;t<e.length;t++)r=s.replace(e[t],"<b>"+e[t]+"</b>");o.innerHTML=r,o.addEventListener("click",(()=>{game.correctIndex=a[n].i,game.answers=game.guesses[0].questions[a[n].i].choices,game.ans[game.index]=game.question.data?game.question.data.length:4,Array.from(l.children).forEach((e=>{e.className=""})),o.className="looseChoice"})),0===l.children.length&&(o.className="looseChoice"),l.append(o)}}};r(""),o.append(s,l),n.main.append(o),s.addEventListener("input",(()=>{r(s.value)})),s.focus()}}else if(game.opts.previewQuestion){activateLoading(!1,!1),clearInterval(y),u.outerHTML="",d.outerHTML="";const e=Element("div",{className:"ChallengeQuestion"}),t=Element("span");0==game.guesses.length?(e.className="ChallengeQuestion noQuiz",t.innerHTML=`<input id="nameInput" placeholder="Enter Quiz Name" value="${document.getElementById("searchTerm").value.replace(/&/g,"&amp;").replace(/"/g,"&quot;")||""}" oninput="document.getElementById('searchTerm').value = this.value;game.updateName();"></input><a href="https://kahoot-win.com/blog/quiz-not-found" target="_blank" class="error-info">[?]</a>`):t.innerHTML="Question: "+(game.guesses[0].questions[game.index].question||game.guesses[0].questions[game.index].title),e.append(Element("br"),Element("br"),t);const a=Element("div",{className:"questionPreviewAnswers",innerHTML:"<h4>Correct Answers</h4>"}),s=[];for(const e in game.answers)game.answers[e].correct&&s.push(e);for(const e in s){const t=["red","blue","yellow","green"],n=Element("template");n.innerHTML=`<div class="${game.answers[s[e]].correct?"correct":""}">\n          <img class="icon${t[s[e]]}" src="/resource/img/game/theme/${KahootThemes[game.theme][t[s[e]]]}" alt="answer choice icon">\n          <span>${game.answers[s[e]].answer}</span>\n        </div>`,a.append(n.content.cloneNode(!0))}n.main.append(a),n.main.append(e)}else 0==game.guesses.length&&n.main.append(NotFoundDiv());if(2==game.opts.fail){const e=Element("div",{className:"failChoice"}),t=Element("input",{type:"radio",name:"fail",id:"fail1"}),a=Element("input",{type:"radio",name:"fail",id:"fail2",checked:!0}),s=Element("label",{htmlFor:"fail1",innerHTML:"&nbsp;Do fail&nbsp;"}),o=Element("label",{htmlFor:"fail2",innerHTML:"Don't Fail"});e.append(t,s,a,o),n.main.append(e),s.onclick=o.onclick=function(){setTimeout((()=>{game.fails[game.index]=t.checked}),10)}}return n}}class QuizStartPage{constructor(){const e=new LobbyPage;ChallengeContinueButton.style.display="none",e.main.setAttribute("ui-event","QuizStart"),e.mid.innerHTML="";const t=Element("h1",{innerHTML:"Get Ready!",className:"shadow"});t.setAttribute("text","Get Ready!");const n=Element("h2",{innerHTML:"Loading...",className:"shadow"});n.setAttribute("text","Loading...");const a=Element("img",{src:"/resource/img/game/icon/load-hole.svg",alt:"loading...",className:"load_circle"}),s=Element("div");s.append(t,a,n),e.mid.append(s),document.body.className="purple2"}}class QuestionAnswererPage{constructor(e){if(!0===game.isAnswerPage)return game.isAnswerPage=!1;if(ChallengeContinueButton.style.display="none",2==game.opts.searchLoosely&&!game.questionStarted)return void(game.questionStarted=!0);2!=game.opts.searchLoosely||game.opts.manual||setTimeout((()=>{game.answerQuestion(null)}),1e3*+game.opts.timeout-(Date.now()-game.recievedTime));const t=new GetReadyPage(e||game.question,!0);if(t.main.setAttribute("ui-event","QuestionAnswer"),game.receivedQuestion=!0,game.questionStarted=!0,document.body.className="Rainbow"==game.theme?"rainbow":"",t.mid.innerHTML="","content"==game.question.type){document.body.className="blue2";const e=Element("div"),n=Element("h1",{innerHTML:"Look Up!",className:"shadow"});n.setAttribute("text","Look Up!");const a=Element("h2",{innerHTML:"No need to answer this time!",className:"shadow"});a.setAttribute("text","No need to answer this time!");const s=Element("img",{src:"/resource/img/game/icon/content-slide.svg",id:"ContentImage"});return e.append(n,s,a),void t.mid.append(e)}const n=Element("div",{className:"Answers"});if("open_ended"==game.question.type||"word_cloud"==game.question.type){const e=game.answers.filter((e=>e.correct))[0],a=Element("input",{className:"openended",placeholder:e?e.answer:"",onkeydown:e=>{"Enter"===e.code&&game.answerQuestion(a.value||null)}}),s=Element("div",{onclick:()=>{game.answer(a.value)},innerHTML:"Submit"}),o=Element("div",{style:"margin: auto;"});HideAnswers.checked&&(a.placeholder=""),o.append(a,s),n.append(o),t.main.append(n),a.focus(),activateLoading(!1,!document.getElementById("manual").checked)}else{const e=Element("img",{src:`/resource/img/game/theme/${KahootThemes[game.theme].red}`,alt:"Red"}),s=Element("img",{src:`/resource/img/game/theme/${KahootThemes[game.theme].blue}`,alt:"Blue"}),o=Element("img",{src:`/resource/img/game/theme/${KahootThemes[game.theme].green}`,alt:"Green"}),l=Element("img",{src:`/resource/img/game/theme/${KahootThemes[game.theme].yellow}`,alt:"Yellow"}),r=[e,s,l,o],i=game.ans[game.index];for(let e=0;e<i;e++)r[e].setAttribute("draggable","false"),n.append(r[e]);if(2==game.ans[game.index]&&(e.style.maxHeight="100%",s.style.maxHeight="100%","TRUE_FALSE"==game.question.gameBlockLayout&&(e.setAttribute("css","layout-tfb"),s.setAttribute("css","layout-tfr"),e.src=s.src=`/resource/img/game/theme/${KahootThemes[game.theme].blue}`,s.src=`/resource/img/game/theme/${KahootThemes[game.theme].red}`)),t.main.append(n),activateLoading(!1,!document.getElementById("manual").checked),"jumble"==game.question.type){function a(e,t){const a=e.cloneNode(!0);n.append(a),a.style.left=(t.x||t.touches[0].clientX)+"px",e.style.visibility="hidden",a.className="draggable";const s=function(e){a.style.left=(e.x||e.touches[0].clientX)-16+"px",function(e,t){const a=[];let s=0,o=0;for(let e=0;e<t.length;e++){"hidden"===t[e].style.visibility&&(o=e);const n=t[e].getBoundingClientRect();s=n.width/2-16,a.push([n.x,n.x+n.width])}const l=(e.x||e.touches[0].clientX)+s;let r=0,i=1/0;for(let e=0;e<a.length;e++)Math.abs(l-a[e][0])<i&&(i=Math.abs(l-a[e][0]),r=e),Math.abs(l-a[e][1])<i&&(i=Math.abs(l-a[e][1]),r=e);"hidden"!==t[r].style.visibility&&(o>r?n.insertBefore(t[o],t[r]):n.insertBefore(t[o],t[r].nextSibling))}(e,n.querySelectorAll("img.jumble"))},o=function(){a.outerHTML="",e.style.visibility="",window.removeEventListener("mousemove",s),window.removeEventListener("touchmove",s),window.removeEventListener("mouseup",o),window.removeEventListener("touchend",o)};window.addEventListener("mousemove",s),window.addEventListener("touchmove",s),window.addEventListener("mouseup",o),window.addEventListener("touchend",o)}[e,s,l,o].forEach(((e,t)=>{e.className="jumble",e.setAttribute("index",t);const n=function(t){a(e,t)};e.addEventListener("touchstart",n),e.addEventListener("mousedown",n)})),n.className="Answers jumble";const t=Element("div",{className:"AnswerOptions"}),r=Element("img",{src:"/resource/img/game/icon/check.svg",onclick:()=>{game.answerJ(n.querySelectorAll("img.jumble"))}}),i=Element("img",{src:"/resource/img/game/icon/reset.svg",onclick:()=>{game.jumbleAnswer=[],new QuestionAnswererPage}});t.append(r,i),n.append(t)}else if("multiple_select_quiz"==game.question.type||"multiple_select_poll"==game.question.type){game.multiAnswer={0:!1,1:!1,2:!1,3:!1},e.onclick=()=>{game.answerM(0,e)},s.onclick=()=>{game.answerM(1,s)},l.onclick=()=>{game.answerM(2,l)},o.onclick=()=>{game.answerM(3,o)};const t=Element("div",{className:"AnswerOptions"}),a=Element("img",{src:"/resource/img/game/icon/check.svg",onclick:()=>{const e=[];for(const t in game.multiAnswer)game.multiAnswer[t]&&e.push(Number(t));game.answer(e)}}),r=Element("img",{src:"/resource/img/game/icon/reset.svg",onclick:()=>{game.multiAnswer={0:!1,1:!1,2:!1,3:!1},new QuestionAnswererPage}});t.append(a,r),n.append(t)}else e.onclick=()=>{game.answer(0)},s.onclick=()=>{game.answer(1)},l.onclick=()=>{game.answer(2)},o.onclick=()=>{game.answer(3)};if(HideAnswers.checked&&"0"!=game.pin[0])return;const c=Element("div",{className:"textAnswer"});n.append(c);for(let e=0;e<game.answers.length;e++){game.answers[e].image&&(r[e].style.backgroundRepeat="no-repeat",r[e].style.backgroundSize="50% 50%",r[e].style.backgroundPosition="50% 50%",r[e].style.backgroundImage="url(https://media.kahoot.it/"+game.answers[e].image.id+")",r[e].src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="),game.answers[e].correct&&(r[e].className=("jumble"===game.question.type?"jumble ":"")+"correct");const t=Element("p");void 0===game.answers[e].answer?t.innerHTML="":t.innerHTML=("jumble"===game.question.type?e+1+". ":"")+game.answers[e].answer,c.append(t)}}try{if("Music"===game.theme)if(e.timeAvailable<=5e3){const e=["005","005-1"];game.playSound(`/resource/music/${e[Math.floor(Math.random()*e.length)]}.m4a`)}else if(e.timeAvailable<=1e4)game.playSound("/resource/music/010.m4a");else if(e.timeAvailable<=2e4){const e=["020","020-1","020-2"];game.playSound(`/resource/music/${e[Math.floor(Math.random()*e.length)]}.m4a`)}else if(e.timeAvailable<=3e4)game.playSound("/resource/music/030.m4a");else if(e.timeAvailable<=6e4)game.playSound("/resource/music/060.m4a");else{const e=["120","120-1"];game.playSound(`/resource/music/${e[Math.floor(Math.random()*e.length)]}.m4a`)}}catch(e){console.warn("[MUSIC] - Failed to play.\n"+e)}if("0"===game.pin[0]){const a=Element("div",{className:"ChallengeQuestion"}),s=Element("span",{innerHTML:game.question.question||game.question.title});if(a.append(s),n.append(a),game.opts.ChallengeDisableTimer)return;let o=e.timeAvailable/1e3;const l=Element("p",{className:"chtimer",innerHTML:o}),r=setInterval((()=>{l.innerHTML=--o,l.isConnected||clearInterval(r)}),1e3);t.bottom.prepend(l)}else 0===game.guesses.length&&t.main.append(NotFoundDiv())}}class QuestionSnarkPage{constructor(e){const t=new GetReadyPage(game.question,!0);t.main.setAttribute("ui-event","Answered"),document.body.className="rainbow",ChallengeContinueButton.style.display="none",t.top.querySelector("div").outerHTML="";const n=Element("h2",{innerHTML:e});n.setAttribute("text",n.innerText);const a=Element("div"),s=Element("img",{src:"/resource/img/game/icon/load-hole.svg",className:"load_circle"});a.append(n,s),t.mid.append(a),0===game.guesses.length&&t.main.append(NotFoundDiv()),activateLoading(!1,!1,"",!1)}}class QuestionEndPage{constructor(e){if(void 0===e.choice)return new TimeUpPage(e);game.isAnswerPage=!1;const t=new GetReadyPage(game.question||e,!0);t.main.setAttribute("ui-event","QuestionEnd"),"0"===game.pin[0]&&game.opts.ChallengeDisableAutoplay?ChallengeContinueButton.style.display="":0===game.guesses.length&&t.main.append(NotFoundDiv()),t.mid.innerHTML="",document.body.className=e.isCorrect?"green":"red",t.bottom.querySelector(".dark").innerHTML=e.totalScore,game.gotWrong=!e.isCorrect,game.lastQuestionType=e.type;const n=Element("h1",{innerHTML:e.isCorrect?"Correct":"Incorrect",className:"shadow"});n.setAttribute("text",n.innerText);const a=Element("h2",{innerHTML:`You are in ${e.rank||0}${1==e.rank?"st":2==e.rank?"nd":3==e.rank?"rd":"th"} place`,className:"shadow"});a.setAttribute("text",a.innerText);const s=Element("h2",{className:"shadow"});try{s.innerHTML=e.nemesis.name.replace(/</gm,"&lt;")?`Just ${e.nemesis.totalScore-e.totalScore} from ${e.nemesis.name}`:"",s.setAttribute("text",s.innerHTML)}catch(e){}const o=Element("img",{id:"correctMark",src:e.isCorrect?"/resource/img/game/icon/check.svg":"/resource/img/game/icon/cross.svg"}),l=Element("h3",{innerHTML:e.isCorrect?"+"+(e.points+e.pointsData.answerStreakPoints.streakBonus):"Keep trying at it!",className:"shadow"}),r=Element("img",{src:"/resource/img/game/icon/fire.svg"}),i=Element("div",{id:"streakImage"}),c=Element("div"),m=Element("h2",{innerHTML:"Answer Streak",className:"shadow",style:"display: inline-block; font-size: 1.5rem; margin: 0"});m.setAttribute("text","Answer Streak"),c.style.position="relative",c.append(m);const u=Element("p",{innerHTML:e.pointsData.answerStreakPoints.streakLevel});i.append(r),i.append(u),c.append(i),e.pointsData.answerStreakPoints.streakLevel<1?(m.style.display="none",game.hadStreak&&(m.style.display="inline-block",m.innerHTML="Answer Streak Lost",m.setAttribute("text","Answer Streak Lost"),game.hadStreak=!1),i.style.display="none"):(game.hadStreak=!0,i.style.display="inline-block");const d=Element("div");d.append(n,o,c,l,a,s),t.mid.append(d),activateLoading(!1,!1)}}class QuizEndPage{constructor(e){let t;game.endData=e,t=1==game.end.info.rank?"1<sup>st</sup>place!":2==game.end.info.rank?"2<sup>nd</sup>place!":3==game.end.info.rank?"3<sup>rd</sup>place!":game.end.info.rank<=5?"Top 5!":"Almost Had It!";const n=new GetReadyPage(game.question,!0);n.main.setAttribute("ui-event","QuizEnd"),n.mid.innerHTML="","0"===game.pin[0]&&game.opts.ChallengeDisableAutoplay&&(ChallengeContinueButton.style.display=""),document.body.className="purple";const a=Element("h1",{innerHTML:t}),s=Element("h2",{innerHTML:"Good Game!"}),o=Element("p",{innerText:"Enjoyed Kahoot Winner?🔥Share this website with your friends and win more Kahoot!s"});if(game.endData.podiumMedalType){const e=Element("img",{src:`/resource/img/game/medal/${game.endData.podiumMedalType}.svg`,alt:"Victory Medal",id:"resultMedal"});n.main.append(e)}if(n.main.append(a,s,o),!game.opts.hideAnswers){const e=Element("div",{id:"finalGuess"});e.innerHTML=`<span id="closeend">X</span>\n      <span id="kahootguess" class="out block" url="https://create.kahoot.it/details/${game.end.info.quizId}">Kahoot Quiz</span>\n      ${game.guesses.length?`<span id="outguess" class="out block" url="https://create.kahoot.it/details/${game.guesses[0].uuid}">Guessed Quiz</span>`:'<span class="block disabled out">(Not found)</span>'}`,n.main.append(e),document.getElementById("closeend").addEventListener("click",(()=>{e.outerHTML=""}));const t=Array.from(document.getElementsByClassName("out"));if(document.getElementById("outguess")){const e=document.getElementById("outguess"),t=document.getElementById("kahootguess");e.getAttribute("url")===t.getAttribute("url")&&(e.className="out block correct")}for(const e of t)e.addEventListener("click",(()=>{e.getAttribute("url")&&window.open(e.getAttribute("url"),"_blank")}))}activateLoading(!1,!1)}}class TeamTalkPage{constructor(e){if(game.opts.teamtalk){const t=new QuestionAnswererPage(game.question||e);return game.isAnswerPage=!0,t}const{main:t,mid:n}=new GetReadyPage(game.question||e,!0);t.setAttribute("ui-event","TeamTalk"),n.innerHTML="",document.body.className="Rainbow"==game.theme?"rainbow":"cyan";const a=Element("h2",{innerHTML:"5"}),s=Element("h1",{innerHTML:"Team Talk",className:"shadow"});s.setAttribute("text","Team Talk");const o=Element("h2",{innerHTML:"Discuss the answer!",className:"shadow"});o.setAttribute("text","Discuss the answer!"),a.id="timer";const l=Element("img",{src:"/resource/img/game/icon/load-large.svg",className:"load_circle",alt:"load_circle"}),r=Element("div"),i=Element("div");i.append(l,a),r.append(s,i,o),n.append(r);let c=game.question.teamTalkDuration||5;const m=setInterval((()=>{try{--c<0?clearInterval(m):a.innerHTML=c}catch(e){clearInterval(m)}}),1e3)}}class TimeUpPage{constructor(e){if(game.receivedQuestion)return;const{main:t,mid:n,top:a,bottom:s}=new LobbyPage;t.setAttribute("ui-event","TimeUp"),n.innerHTML="";try{document.querySelector(".noQuiz").outerHTML=""}catch(e){}game.guesses&&0!==game.guesses.length||t.append(NotFoundDiv()),document.body.className="Rainbow"==game.theme?"rainbow":"blue2";const o=Element("h1",{innerHTML:"Get Ready!",className:"shadow"});o.setAttribute("text","Get Ready!");const l=Element("img",{src:"/resource/img/game/icon/late-join.svg",id:"ContentImage"}),r=Element("h2",{innerHTML:"You'll be able to join soon",className:"shadow"});r.setAttribute("text","You'll be able to join soon");const i=Element("div");if(i.append(o,l,r),e){const t=Element("p",{innerHTML:""+game.score,className:"dark"}),n={quiz:"Quiz",open_ended:"Type Answer",survey:"Poll",jumble:"Puzzle",word_cloud:"Word Cloud",content:"Slide",multiple_select_poll:"Poll",multiple_select_quiz:"Quiz",brainstorming:"Brainstorm"},o=Element("img",{alt:"",src:`/resource/img/game/type/${e.type}.svg`}),l=Element("span",{innerHTML:n[e.type]}),r=Element("div",{id:"quizTypeImage"});r.append(o,l),a.append(r),s.append(t)}n.append(i)}}class FeedbackPage{constructor(){const{main:e,mid:t,top:n,bottom:a}=new LobbyPage;e.setAttribute("ui-event","Feedback"),t.innerHTML="";try{document.querySelector(".noQuiz").outerHTML=""}catch(e){}document.body.className="Rainbow"==game.theme?"rainbow":"",a.outerHTML="",n.className="gameOver",n.innerHTML="<p>Game Over</p>";try{document.querySelector("noQuiz").outerHTML=""}catch(e){}e.className="Feedback",e.style.padding="0";const s=Element("div",{className:"feedback"});s.innerHTML='\n    <p>How do you rate this kahoot?</p>\n    <div class="star-container">\n      <input id="star1" type="radio" name="star" value="1"/>\n      <label for="star1"></label>\n      <input id="star2" type="radio" name="star" value="2"/>\n      <label for="star2"></label>\n      <input id="star3" type="radio" name="star" value="3"/>\n      <label for="star3"></label>\n      <input id="star4" type="radio" name="star" value="4"/>\n      <label for="star4"></label>\n      <input id="star5" type="radio" name="star" value="5"/>\n      <label for="star5"></label>\n    </div>\n    <div class="thumb-container">\n      <p>Did you learn something?</p>\n      <div>\n        <input type="radio" name="learn" id="learn1" value="1"/>\n        <label for="learn1"></label>\n        <input type="radio" name="learn" id="learn2" value="0"/>\n        <label for="learn2"></label>\n      </div>\n    </div>\n    <div class="thumb-container">\n      <p>Do you recommend it?</p>\n      <div>\n        <input type="radio" name="rec" id="rec1" value="1"/>\n        <label for="rec1"></label>\n        <input type="radio" name="rec" id="rec2" value="0"/>\n        <label for="rec2"></label>\n      </div>\n    </div>\n    <p>To continue, tell us how you feel</p>\n    <div class="face-container">\n      <input type="radio" name="feel" id="feel1" value="1"/>\n      <label for="feel1"></label>\n      <input type="radio" name="feel" id="feel2" value="0"/>\n      <label for="feel2"></label>\n      <input type="radio" name="feel" id="feel3" value="-1"/>\n      <label for="feel3"></label>\n    </div>',e.append(s);const o=Array.from(document.querySelectorAll('[name="star"]'));for(const e of o)e.addEventListener("click",(()=>{for(const e of o)e.className="";for(let t=+e.id.split("star")[1];t>0;t--)document.getElementById("star"+t).className="selected"}));const l=document.getElementById("feel1"),r=document.getElementById("feel2"),i=document.getElementById("feel3");l.onclick=i.onclick=r.onclick=()=>{const e=(document.querySelector('input[name="star"]:checked')||{}).value,t=(document.querySelector('input[name="learn"]:checked')||{}).value,n=(document.querySelector('input[name="rec"]:checked')||{}).value,a=document.querySelector('input[name="feel"]:checked').value;return game.sendFeedback({fun:+e,learn:+t,recommend:+n,overall:+a}),new QuizEndPage(JSON.stringify(game.endData))}}}function calculateTimeout(e,t){const n=-2*t*(e/1e3-1);return n<.1?0:n}function activateLoading(e,t,n,a){HideDiv.style.background=t?"rgba(0,0,0,0.3)":"transparent",HideDiv.style.pointerEvents=t?"all":"none",HideDiv.children[0].children[0].style.display=e?"inline-block":"none",LoadingText.innerHTML=n||"",HideDiv.children[0].children[0].src=a?"/resource/img/game/icon/load-large.svg":"/resource/img/game/icon/load-hole.svg"}function setSchema(e,t,n,a){n&&e.setAttribute("itemscope",""),a&&e.setAttribute("itemtype","https://schema.org/"+t),a&&e.setAttribute("itemprop",a)}function sleep(e){return new Promise((t=>{setTimeout(t,1e3*e)}))}async function resetGame(){try{game.music.pause()}catch(e){}game;socket&&(socket.onclose=null,socket.close(),socket=null),game=new Game,new LoginPage,document.body.className="rainbow",document.getElementById("author").value="",document.getElementById("uuid").value="",document.getElementById("searchTerm").value="",document.getElementById("timeout_custom_1").value="",document.getElementById("timeout_custom_2").value="",game.loadOptions()}function clearUI(){return activateLoading(!1,!1),UIDiv.innerHTML="",Element("div")}let presetNumber=0;function loadSetting(e,t){for(const t in e){const n=document.getElementById(t);"checkbox"==n.type||"radio"==n.type?n.checked=e[t]:n.value=e[t]}game.saveOptions(),new ErrorHandler("Restored preset '"+t+"'",{isNotice:!0})}function addPreset(e){game.saveOptions(),document.querySelectorAll(".preset.remove").forEach((e=>{e.outerHTML=""}));let t=[];if(localStorage.presets)try{t=JSON.parse(localStorage.presets)}catch(e){}t.push({name:e,options:{brute:game.opts.brute,fail:game.opts.fail,teamtalk:game.opts.teamtalk,manual:game.opts.manual,previewQuestion:game.opts.previewQuestion,searchLoosely:game.opts.searchLoosely,teamMembers:game.opts.teamMembers,theme:game.opts.theme,timeout:game.opts.timeout,ChallengeDisableTimer:game.opts.ChallengeDisableTimer,ChallengeDisableAutoplay:game.opts.ChallengeDisableAutoplay}}),localStorage.presets=JSON.stringify(t),loadPresets()}function loadPresets(){document.querySelectorAll(".preset.remove").forEach((e=>{e.outerHTML=""}));try{const e=JSON.parse(localStorage.presets),t=document.getElementById("preset_add_div");for(const n of e){const e=n.options,a=Element("template");a.innerHTML=`<div class="preset flex remove">\n        <div class="center">\n          <span class="presetTitle">${n.name} <label for="preset_${presetNumber}">(?)</label></span>\n          <input type="checkbox" id="preset_${presetNumber}" class="ch nosend">\n          <div>\n            <p>Theme <span class="yellow">${e.theme}</span></p>\n            <p>Timeout <span class="yellow">${e.timeout||"0"}</span></p>\n            <p>Team <span class="yellow">${e.teamMembers||"(unset)"}</span></p>\n            <p>Fail <span class="${Number(e.fail)?"green":"red"}">${Number(e.fail)?"ON":"OFF"}</span></p>\n            <p>Loose <span class="${Number(e.searchLoosely)?"green":"red"}">${Number(e.searchLoosely)?"ON":"OFF"}</span></p>\n            <p>Brute <span class="${e.brute?"green":"red"}">${e.brute?"ON":"OFF"}</span></p>\n            <p>Manual <span class="${e.manual?"green":"red"}">${e.manual?"ON":"OFF"}</span></p>\n            <p>Preview <span class="${e.previewQuestion?"green":"red"}">${e.previewQuestion?"ON":"OFF"}</span></p>\n            <p>Skip Team Talk <span class="${e.teamtalk?"green":"red"}">${e.teamtalk?"ON":"OFF"}</span></p>\n            <p>Disable Question Timer <span class="${e.ChallengeDisableTimer?"green":"red"}">${e.ChallengeDisableTimer?"ON":"OFF"}</span></p>\n            <p>Disable Autoplay <span class="${e.ChallengeDisableAutoplay?"green":"red"}">${e.ChallengeDisableAutoplay?"ON":"OFF"}</span></p>\n          </div>\n          <button id="restore_${presetNumber}" class="block">Restore</button>\n          <img src="/resource/img/game/icon/cross.svg" alt="delete" id="delete_${presetNumber}">\n        </div>\n      </div>`,document.getElementById("preset_container").insertBefore(a.content.cloneNode(!0),t),document.getElementById("restore_"+presetNumber).onclick=function(){loadSetting({theme:e.theme,timeout:e.timeout,teamMembers:e.teamMembers,fail:e.fail,searchLoosely:e.searchLoosely,brute:e.brute,manual:e.manual,previewQuestion:e.previewQuestion},n.name)},document.getElementById("delete_"+presetNumber).onclick=function(){try{let e=JSON.parse(localStorage.presets);e=e.filter((e=>e.name!=n.name)),localStorage.presets=JSON.stringify(e),loadPresets()}catch(e){}},presetNumber++}}catch(e){}}const ChallengeContinueButton=document.getElementById("ChallengeNext"),SettingDiv=document.getElementById("settings"),SettingSwitch=document.getElementById("menu_toggle"),AboutSwitch=document.getElementById("about"),ChangelogSwitch=document.getElementById("changelog"),HideDiv=document.getElementsByClassName("Loading")[0],UIError=document.getElementsByClassName("Error")[0],UIDiv=document.getElementsByClassName("Main")[0],HideAnswers=document.getElementById("hideAnswers"),LoadingText=document.getElementById("loadingText"),ThemeChooser=document.getElementById("theme"),QuizResult=document.getElementById("quizresult");new LoginPage(!1),loadPresets();let closePage=0;const SearchDivSettings=document.getElementById("div_search_options"),GameDivSettings=document.getElementById("div_game_options"),ChallengeDivSettings=document.getElementById("div_challenge_options"),dso=document.getElementById("dso"),dgo=document.getElementById("dgo"),dco=document.getElementById("dco");function Themer(){game.theme=ThemeChooser.value,"Rainbow"===game.theme?(SettingDiv.className="rainbow correct",document.querySelector(".About").className="About rainbow"):"FRANXX"===game.theme?(SettingDiv.className="franxx",document.querySelector(".About").className="About"):(SettingDiv.className="",document.querySelector(".About").className="About");const e=document.querySelector('.Login>img[alt="Kahoot logo"]');e&&(e.src="/resource/img/game/theme/"+KahootThemes[game.theme].logo)}SearchDivSettings.onchange=GameDivSettings.onchange=ChallengeDivSettings.onchange=function(e){switch(e.target.id){case"div_search_options":dso.className="flex selected",dgo.className="flex",dco.className="flex";break;case"div_game_options":dso.className="flex",dgo.className="flex selected",dco.className="flex";break;case"div_challenge_options":dso.className="flex",dgo.className="flex",dco.className="flex selected"}},dgo.className="flex selected",AboutSwitch.addEventListener("click",(()=>{closePage=AboutSwitch.checked?1:0})),ChangelogSwitch.addEventListener("click",(()=>{closePage=ChangelogSwitch.checked?2:0})),ChallengeContinueButton.addEventListener("click",(()=>{game.client.next()})),SettingSwitch.onclick=()=>{SettingSwitch.checked||(dataLayer.push({event:"toggle_settings"}),document.getElementById("preset_toggle").checked&&(document.getElementById("preset_toggle").checked=!1),game.saveOptions()),closePage=0},ThemeChooser.addEventListener("change",Themer),QuizResult.addEventListener("click",(e=>{"LABEL"!==e.target.nodeName&&QuizResult.getAttribute("url")&&window.open(QuizResult.getAttribute("url"),"_blank")}));const shortcuts=e=>{if(e.ctrlKey){switch(e.key){case"b":document.getElementById("brute").click(),new ErrorHandler("Brute 2FA: "+(document.getElementById("brute").checked?"ON":"OFF"),{isNotice:!0}),dataLayer.push({type:"brute",value:document.getElementById("brute").checked});break;case"p":document.getElementById("fail").value=0==document.getElementById("fail").value?.9:0,new ErrorHandler("Purposely Fail: "+(0!=document.getElementById("fail").value?"ON":"OFF"),{isNotice:!0}),dataLayer.push({type:"fail",value:document.getElementById("fail").value});break;case"m":document.getElementById("manual").click(),new ErrorHandler("Manual Control: "+(document.getElementById("manual").checked?"ON":"OFF"),{isNotice:!0}),dataLayer.push({type:"manual",value:document.getElementById("manual").checked});break;case"h":document.getElementById("hideAnswers").click(),new ErrorHandler("Hide Correct: "+(document.getElementById("hideAnswers").checked?"ON":"OFF"),{isNotice:!0}),dataLayer.push({type:"hide",value:document.getElementById("hideAnswers").checked});break;case"o":document.getElementById("challengeCorrect").click(),new ErrorHandler("Challenge Always Correct: "+(document.getElementById("challengeCorrect").checked?"ON":"OFF"),{isNotice:!0}),dataLayer.push({type:"correct",value:document.getElementById("challengeCorrect").checked});break;case"u":document.getElementById("previewQuestion").click(),new ErrorHandler("Preview Question: "+(document.getElementById("previewQuestion").checked?"ON":"OFF"),{isNotice:!0}),dataLayer.push({type:"preview",value:document.getElementById("previewQuestion").checked});break;case"j":try{if(SettingDiv.style.display){SettingDiv.style="",document.querySelector(".Changelog").style="",document.querySelector(".About").style="",document.getElementById("tutorial").style="",document.querySelector(".misc").style="",document.querySelector(".Error").style="";try{document.getElementById("logotext").style=""}catch(e){}try{document.querySelector(".sm.sidebar").style=""}catch(e){}try{document.getElementById("abtlnk").style=""}catch(e){}try{document.getElementById("chnge").style=""}catch(e){}try{document.getElementById("lang").style=""}catch(e){}}else{SettingDiv.style="display: none",document.querySelector(".Changelog").style="display: none",document.querySelector(".About").style="display: none",document.getElementById("tutorial").style="display: none",document.querySelector(".misc").style="opacity: 0",document.querySelector(".Error").style="display: none";try{document.getElementById("logotext").style="display: none"}catch(e){}try{document.querySelector(".sm.sidebar").style="display: none"}catch(e){}try{document.getElementById("abtlnk").style="display: none"}catch(e){}try{document.getElementById("chnge").style="display: none"}catch(e){}try{document.getElementById("lang").style="display: none"}catch(e){}try{document.querySelector(".grecaptcha-badge").style.visibility="hidden"}catch(e){}try{document.querySelector(".ad-container").style.display="none",document.querySelector(".ad-container-2").style.display="none"}catch(e){}}}catch(e){console.log(e)}finally{const e=document.head.querySelector('[rel="shortcut icon"]')||Element("link");e.isConnected||(e.rel="shortcut icon",e.href="https://kahoot.it/favicon.ico",document.head.append(e),document.title="Play Kahoot!"),SettingDiv.style.display?(game.panicSettings=JSON.parse(JSON.stringify(game.opts)),document.getElementById("manual").checked=!0,document.getElementById("hideAnswers").checked=!0,document.getElementById("previewQuestion").checked=!1):(game.opts=game.panicSettings,document.getElementById("manual").checked=game.opts.manual,document.getElementById("hideAnswers").checked=game.opts.hideAnswers,document.getElementById("previewQuestion").checked=game.opts.previewQuestion),game.saveOptions(),dataLayer.push({type:"panick",value:""})}break;case"d":document.getElementById("ChallengeDisableAutoplay").click(),new ErrorHandler("Challenge Autoplay: "+(document.getElementById("ChallengeDisableAutoplay").checked?"OFF":"ON"),{isNotice:!0}),dataLayer.push({type:"autoplay",value:document.getElementById("ChallengeDisableAutoplay").checked});break;case"k":document.getElementById("searchLoosely").value=Number(document.getElementById("searchLoosely").value)?0:1,new ErrorHandler("Loose Searching: "+(Number(document.getElementById("searchLoosely").value)?"ON":"OFF"),{isNotice:!0}),dataLayer.push({type:"loose",value:document.getElementById("searchLoosely").value});break;case"t":document.getElementById("teamtalk").click(),new ErrorHandler("Skip Team Talk: "+(Number(document.getElementById("teamtalk").checked)?"ON":"OFF"),{isNotice:!0}),dataLayer.push({type:"teamtalk",value:document.getElementById("teamtalk").checked});break;default:return}dataLayer.push({event:"shortcut"}),e.preventDefault(),e.stopPropagation(),game.saveOptions()}};window.addEventListener("keydown",shortcuts),window.addEventListener("keydown",(e=>{if(game.question&&["quiz","multiple_select_quiz","multiple_select_poll","survey"].includes(game.question.type)&&document.querySelector('[alt="Red"]')&&+e.code.split("Digit")[1]<=4)switch(+e.code.split("Digit")[1]){case 0:game.answerQuestion(null);break;case 1:document.querySelector('[alt="Red"]').click();break;case 2:document.querySelector('[alt="Blue"]').click();break;case 3:document.querySelector('[alt="Yellow"]').click();break;case 4:document.querySelector('[alt="Green"]').click()}})),UIError.addEventListener("click",(()=>{clearTimeout(game.errorTimeout),UIError.style.right="",dataLayer.push({event:"close_error"})}));let pressTime=-1;SettingSwitch.addEventListener("click",(()=>{if(Date.now()-pressTime<500)return pressTime=-1,void shortcuts({ctrlKey:!0,key:"j",preventDefault:()=>{},stopPropagation:()=>{}});pressTime=Date.now()}));const SearchInput=document.getElementById("sub-quiz-input"),SearchOutput=document.getElementById("sub-quiz-output");let SearchIndex=0;function Search(e,t){SearchOutput.innerHTML="Loading...";const n=new XMLHttpRequest;n.open("GET",`/search?q=${encodeURIComponent(e)}&c=${Number(t)}`),n.send(),n.onload=function(){const a=JSON.parse(n.response);if(0===a.length)return void(SearchOutput.innerHTML="No Results.");FormatSearch(a),document.getElementById("sub-quiz-next").addEventListener("click",(()=>{Search(e,(t||0)+25)}));Array.from(document.getElementsByClassName("sub-quiz-button")).forEach((e=>{e.addEventListener("click",(()=>{const t=e.nextElementSibling.value;document.getElementById("uuid").value=t,document.getElementById("sub-uuid").checked=!1}))}))}}function FormatSearch(e){SearchOutput.innerHTML='\n  <span>\n    <span class="sub-quiz-img"><img src="/resource/img/game/theme/konosuba/red.svg"/></span>\n    <span class="sub-quiz-title">Quiz Title</span>\n    <span class="sub-quiz-author">Quiz Creator</span>\n    <span class="sub-quiz-questions"># of Questions</span>\n    <button id="sub-quiz-next">Next</button>\n  </span>\n  <hr/>\n  ';for(const t in e){const n=e[t],a=Element("template");a.innerHTML=`<span>\n      <span class="sub-quiz-img"><img src="${n.cover}"/></span>\n      <span class="sub-quiz-title">${n.title}</span>\n      <span class="sub-quiz-author">${n.creator_username}</span>\n      <span class="sub-quiz-questions">${n.questions.length}</span>\n      <button class="sub-quiz-button">Use</button>\n      <input type="text" class="ch" value="${n.uuid}"/>\n    </span>`,SearchOutput.append(a.content.cloneNode(!0))}}SearchInput.addEventListener("keydown",(e=>{"Enter"===e.code&&(SearchIndex=0,Search(SearchInput.value,SearchIndex))})),game.loadOptions(),game.theme=ThemeChooser.value,"Kahoot"!=game.theme&&new LoginPage;window.addEventListener("load",(()=>{"3.3.0"!==localStorage.returningUser&&activateTutorial()}));const TutorialDiv=document.getElementById("tutorial");function activateTutorial(){if(localStorage.returningUser="3.3.0",TutorialDiv&&TutorialDiv.innerHTML)return;AboutSwitch.checked&&AboutSwitch.click();const e=document.createElement("template");e.innerHTML='\n    <div class="tut_cont">\n      <div id="tut_data">\n        <div id="tut_info">\n          <strong>Hey there! Looks like you are new here. Would you like a tutorial?</strong>\n        </div>\n        <button id="tut_next" tut-step="0" onclick="tutorialSteps(this.getAttribute(\'tut-step\'))">Yes please!</button>\n        <button onclick="dataLayer.push({event:\'close_tutorial\'});document.getElementById(\'tutorial\').innerHTML = \'\';new ErrorHandler(\'If you ever need me again, click the tutorial button in the \\\'about\\\' section!\',{isNotice:true});resetGame();">No thank you.</button>\n      </div>\n    </div>\n  ',TutorialDiv.append(e.content.cloneNode(!0))}function tutorialSteps(e){dataLayer.push({event:"do_tutorial",value:e});const t=document.getElementById("tut_data"),[n,i]=Array.from(document.querySelectorAll("#tut_data>button")),o=document.getElementById("tut_info");switch(n.setAttribute("tut-step",+e+1),n.innerHTML="Next",i.innerHTML="Done",e+""){case"0":SettingSwitch.checked&&SettingSwitch.click(),o.innerHTML='<em>Note: Do not actually do any actions in this tutorial. Just press "Next" and "Done".</em>\n      <p><strong>Joining a game: PIN</strong></p>\n      <p>To join the game, first input the game pin.</p>\n      <p>Valid game pins include:</p>\n      <ul>\n        <li>Live Game Pins <code>12345</code></li>\n        <li>Challenge Game Pins <code>012345</code></li>\n        <li>Challenge Game Links <code>https://kahoot.it/challenge/012345?challenge-id=really-long-string</code></li>\n        <li>Special Challenge Games <code>weekly</code>, <code>weekly-previous</code></li>\n      </ul>';break;case"1":SettingSwitch.checked&&SettingSwitch.click(),game.client.name="Tutorial",game.client.gameid="12345-LUGGAGE",new LoginPage(!0),o.innerHTML='<strong>Joining a game: Name</strong>\n      <p>Next, input a name. You can also press the "Random Name" button.</p>\n      <p>When you are ready, press "OK, Go!"</p>';break;case"2":SettingSwitch.checked&&SettingSwitch.click(),game.name="Tutorial",new LobbyPage,t.style.marginTop="8rem",t.style.height="calc(100% - 10rem)",o.innerHTML="<p><strong>In Game: Providing the Quiz Name</strong></p>\n      <p>When you join the game, you may see the input above. This input is where you should place the quiz name, or quiz id into.</p>\n      <p>The quiz name does not need to be exact. If you know the general subject of the quiz, you can try putting that as the \"quiz name\"</p>\n      <p><strong>How to get the quiz name/id:</strong></p>\n      <p>The quiz name appears on the host's screen before the quiz is loaded (the launch page) and for a few seconds at the start of the quiz.</p>\n      <p>The quiz id is located in the url of the host's screen. It is the long string that follows <code>quizId=</code></p>";break;case"3":SettingSwitch.checked&&SettingSwitch.click(),o.innerHTML="<p><strong>In Game: Providing the Quiz Name</strong></p>\n      <p>This input will continue to stay at the top until a quiz is found.</p>\n      <p>If you do not provide a quiz name or id, Kahoot Winner will use a large list of over 50,000 quizzes to try and find your quiz. This will likely only work on very popular quizzes.</p>";break;case"4":SettingSwitch.checked&&SettingSwitch.click(),t.style.marginTop="",game.client.quiz={currentQuestion:{quizQuestionAnswers:[4],gameBlockIndex:0,gameBlockType:"quiz"},quizQuestionAnswers:[4]},game.guesses=[{questions:[{type:"quiz",choices:[{answer:"Correct",correct:!0},{answer:"Incorrect",correct:!1},{answer:"Tutorial",correct:!1},{answer:"",correct:!1,image:{id:"dfa9fc36-1122-4dc2-a00b-04d490c07765"}}]}]}],game.question=game.client.quiz.currentQuestion,game.score=-1/0,new QuestionAnswererPage,activateLoading(!1),o.innerHTML="<p><strong>Answering: Basic Overview</strong></p>\n      <p>By default, Kahoot Winner will just automatically answer the question using the best answer.</p>\n      <p>If you want to answer the question yourself, enable manual control in the settings.</p>";break;case"5":SettingSwitch.checked&&SettingSwitch.click(),o.innerHTML="<p><strong>Answering: Information</strong></p>\n      <p>As seen below, correct answers will have a rainbow border around it. Also, the text of each choice is listed above each option.</p>\n      <p>When the choice uses an image, the image will replace the shape.</p>";break;case"6":SettingSwitch.checked||SettingSwitch.click(),document.querySelector('[for="div_search_options"]').click(),t.style.position="absolute",o.innerHTML="<p><strong>Settings: Search Options</strong></p>\n      <p>Search options control how the server finds you quiz.</p>\n      <p>Quiz Author - Specifies the creator to filter for quizzes</p>\n      <p>Quiz UUID - Specifies the quiz id to use. You can also directly search for a quiz in the sub-settings area.</p>\n      <p>Search Term - Specifies the quiz name/keywords to search for quizzes</p>\n      <p>Current Guess - This button shows the current quiz Kahoot Winner is using. You can lock it in by pressing the lock.</p>";break;case"7":SettingSwitch.checked||SettingSwitch.click(),document.querySelector('[for="div_game_options"]').click(),o.innerHTML="<p><strong>Settings: Game Options</strong></p>\n      <p>Game options control how Kahoot Winner interacts with the game.</p>\n      <p>Answer Timeout - Delays the server's answer time allowing you to be less suspicious.</p>\n      <p>Team Members - Customizes your team members in team mode</p>\n      <p>Fail Purposely - Fails the question purposely</p>\n      <p>Search Loosely - Used when the question order is randomized. Requires user input to select the correct question.</p>\n      <p>Bypass 2FA - Used to skip the two-factor step if enabled</p>\n      <p>Manual Control - Allows you to answer questions instead of the server</p>\n      <p>Skip Team Talk - Allows you to answer during team talk time</p>\n      <p>Preview Question - Allows you to see the question/answers coming up</p>\n      <p>Hide Correct - Used to make Kahoot Winner look like regular Kahoot when answering.</p>";break;case"8":SettingSwitch.checked||SettingSwitch.click(),document.querySelector('[for="div_challenge_options"]').click(),o.innerHTML="<p><strong>Settings: Challenge Options</strong></p>\n      <p>Note: These options have no effect on <b>LIVE GAMES</b></p>\n      <p>Points - Allows you to customize the amount of points/question in a challenge question.</p>\n      <p>Challenge Always Correct - Makes all your answers correct, even if you purposely set it incorrect.</p>\n      <p>Enable Streak Points - Uses streaks when calculating points</p>\n      <p>Disable Question Timer - You can wait while answering questions without worrying about the timer.</p>";break;case"9":t.style.position="",o.innerHTML='<p><strong>Settings: More Info</strong></p>\n      <p>If you need more explanations, open the settings and press the "?" next to each option.</p>';break;case"10":i.addEventListener("click",(function e(){dataLayer.push({event:"complete_tutorial"}),setTimeout((function(){return new ErrorHandler("Finished Tutorial! Way to go!",{isNotice:!0})}),300);try{i.removeEventListener(e)}catch(e){}})),SettingSwitch.checked&&SettingSwitch.click(),game.end={info:{rank:1}},new QuizEndPage({podiumMedalType:"gold"}),n.outerHTML="",o.innerHTML="<p><strong>It's not working!</strong></p>\n      <p>Usually when Kahoot Winner is not working, it is one of the following issues:</p>\n      <ol>\n        <li>The quiz is private.</li>\n        <ul><li>There is no workaround for this. Kahoot Winner will not work on private live games.</li></ul>\n        <li>You did not provide the quiz name</li>\n        <ul><li>While Kahoot Winner caches a lot of quizzes, there are a lot more that are not in the database. Provide the quiz name to ensure Kahoot Winner can be able to find it.</li></ul>\n        <li>The quiz is not popular</li>\n        <ul><li>If your quiz has a common name and is not popular, it may be too far down in the list of Kahoots for Kahoot Winner to find it.</li></ul>\n        <li>The questions are randomized</li>\n        <ul><li>If the questions are randomized, enable <code>Search Loosely</code> and type the question when it starts</li></ul>\n        <li>The answers are randomized</li>\n        <ul><li>If the answers are randomized, enable <code>Manual Control</code> and answer the question correctly.</li></ul>\n      </ol>"}}